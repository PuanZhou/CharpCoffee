@model IEnumerable<prjCSCoffee.Models.CShoppingCartItem>

@{
    ViewData["Title"] = "Car3";
    int count = 0;
    int Total = 0;
}

<!-- ##### Breadcrumb Area Start ##### -->
<div class="breadcrumb-area">
    <!-- Top Breadcrumb Area -->
    <div class="top-breadcrumb-area bg-img bg-overlay d-flex align-items-center justify-content-center" style="background-image: url(img/bg-img/24.jpg);">
        <h2>購物明細確認</h2>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#"><i class="fa fa-home"></i> Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Cart</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<!-- ##### Breadcrumb Area End ##### -->
<!-- ##### Cart Area Start ##### -->
<div class="cart-area section-padding-0-100 clearfix">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="cart-table clearfix">

                    <div class="progress" style="height: 40px; background-color: #F0F0F0; margin-bottom: 50px;">
                        <div class="progress-bar" role="progressbar" style="width: 33%; font-size: 15px; background-color: #BEBEBE" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100">確認購物車</div>
                        <div class="progress-bar" role="progressbar" style="width: 33%; font-size: 15px; background-color: #BEBEBE" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100">付款與運送方式</div>
                        <div class="progress-bar" role="progressbar" style="width: 34%; font-size: 15px;" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100">最後確認</div>
                    </div>

                    <table class="table">
                        <thead>
                            <tr>
                                <th>
                                    產品名稱
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.count)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.price)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.小計)
                                </th>

                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                count++;
                                Total += (int)item.小計;
                                int price = (int)item.price;
                                int 小計 = (int)item.小計;
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.productId)
                                        @item.product.ProductName
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.count)
                                    </td>
                                    <td>
                                        @*<p id="txtprice">NT$@item.price</p>*@
                                        <p id="txtprice">NT$@price</p>
                                    </td>
                                    <td>
                                        @*<p id="txtcount">NT$@item.小計</p>*@
                                        <p id="txtcount">NT$@小計</p>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>

                    <div style=" margin-bottom:20px">
                        <div style="float:right">
                            <p>共 @count 項商品</p>
                            <p id="labTotal">總金額 : NT$ @Total 元</p>
                        </div>
                    </div>


                    <div class="form-horizontal">
                        <h3>確認收件人資料</h3>
                        @foreach (var item in Model)
                        {
                            <div class="form-group">
                                <span class="control-label col-md-2">收件人姓名</span>
                                @Html.DisplayFor(modelItem => item.Receiver)
                            </div>
                            <div class="form-group">
                                <span class="control-label col-md-2">收件人電話</span>
                                @Html.DisplayFor(modelItem => item.phone)
                            </div>
                            <div class="form-group">
                                <span class="control-label col-md-2">收件人地址</span>
                                @Html.DisplayFor(modelItem => item.Address)
                            </div>
                            <div class="form-group">
                                <span class="control-label col-md-2">付款方式</span>
                                @item.paymentname
                            </div>
                            break;
                        }

                    </div>


                    <form id="formCreditCard" method="post" accept-charset="UTF-8"
                          action="https://payment-stage.opay.tw/Cashier/AioCheckOut/V5">

                        <div class="form-group">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                <label class="form-check-label" for="invalidCheck">
                                    我已確認訂購內容及寄送資訊無誤
                                </label>
                                <div class="invalid-feedback">
                                    您必須在提交前同意
                                </div>
                            </div>
                        </div>


                        <input type="hidden" name="MerchantID" value="2000132" />

                        <input type="hidden" name="MerchantTradeNo" value="@ViewBag.tradeNo" />

                        <input type="hidden" name="MerchantTradeDate" value="@ViewBag.timenow" />

                        <input type="hidden" name="PaymentType" value="aio" />

                        <input type="hidden" name="TotalAmount" value="@ViewBag.Total" />

                        <input type="hidden" name="TradeDesc" value="建立信用卡測試訂單" />

                        <input type="hidden" name="ItemName" value="@ViewBag.ItemName" />

                        <input type="hidden" name="ReturnURL" value="https://developers.opay.tw/AioMock/MerchantReturnUrl" />
   
                        <input type="hidden" name="ChoosePayment" value="Credit" />
         
                        <input type="hidden" name="StoreID" value="" />
                     
                        <input type="hidden" name="ClientBackURL" value="https://developers.opay.tw/AioMock/MerchantClientBackUrl" />
         
                        <input type="hidden" name="CreditInstallment" value="" />
  
                        <input type="hidden" name="InstallmentAmount" value="" />

                        <input type="hidden" name="Redeem" value="" />
                
                        <input type="hidden" name="EncryptType" value="1" />
  
                        <input type="hidden" name="CheckMacValue" value="@ViewBag.checkMacValue" />

                        <div class="form-group">
                            <div class="col-md-offset-2 col-md-10">
                                @Html.ActionLink("返回上一步", "Car2", "Shopping", null, new { @class = "btn btn-light" })
                                <input type="submit" value="確認訂購" class="btn btn-info" />
                            </div>
                        </div>
                    </form>

                    @*<div>
                            <form id="formCreditCard" method="post" accept-charset="UTF-8"
                                  action="https://payment-stage.opay.tw/Cashier/AioCheckOut/V5">

                                MerchantID 商店代號:
                                <input type="text" name="MerchantID" value="2000132" /><br />
                                MerchantTradeNo 商店交易編號:
                                <input type="text" name="MerchantTradeNo" value="@ViewBag.tradeNo" /><br />
                                MerchantTradeDate 商店交易時間:
                                <input type="text" name="MerchantTradeDate" value="@ViewBag.timenow" /><br />
                                PaymentType 交易類型:
                                <input type="text" name="PaymentType" value="aio" /><br />
                                TotalAmount 交易金額:
                                <input type="text" name="TotalAmount" value="@ViewBag.Total" /><br />
                                TradeDesc 交易描述:
                                <input type="text" name="TradeDesc" value="建立信用卡測試訂單" /><br />
                                ItemName 商品名稱:
                                <input type="text" name="ItemName" value="@ViewBag.ItemName" /><br />
                                ReturnURL 付款完成通知回傳網址:
                                <input type="text" name="ReturnURL" value="https://developers.opay.tw/AioMock/MerchantReturnUrl" /><br />
                                ChoosePayment 預設付款方式:
                                <input type="text" name="ChoosePayment" value="Credit" /><br />
                                會員商店代碼:
                                <input type="text" name="StoreID" value="" /><br />
                                ClientBackURL Client端返回廠商網址:
                                <input type="text" name="ClientBackURL" value="https://developers.opay.tw/AioMock/MerchantClientBackUrl" /><br />
                                CreditInstallment 刷卡分期期數:
                                <input type="text" name="CreditInstallment" value="" /><br />
                                InstallmentAmount 使用刷卡分期的付款金額:
                                <input type="text" name="InstallmentAmount" value="" /><br />
                                Redeem 信用卡是否使用紅利折抵:
                                <input type="text" name="Redeem" value="" /><br />
                                CheckMacValue 簽章類型:
                                <input type="text" name="EncryptType" value="1" /><br />
                                CheckMacValue 檢查碼:
                                <input type="text" name="CheckMacValue" value="@ViewBag.checkMacValue" /><br />
                                <input type="submit" value="送出訂單" />

                            </form>
                        </div>*@


                </div>
            </div>
        </div>



    </div>
</div>
<!-- ##### Cart Area End ##### -->
